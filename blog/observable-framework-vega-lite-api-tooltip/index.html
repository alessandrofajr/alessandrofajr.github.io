<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Como ativar a API de tooltip do Vega-Lite no Observable Framework</title>
  <link rel="canonical" href="/blog/observable-framework-vega-lite-api-tooltip/" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Literata:ital,opsz,wght@0,7..72,200..900;1,7..72,200..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
  <link rel="icon" href="/favicon.svg" sizes="any">
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="Como ativar a API de tooltip do Vega-Lite no Observable Framework" />
  <meta property="og:url" content="/blog/observable-framework-vega-lite-api-tooltip/" />
  <meta property="og:image" content="/img/cover.webp" />
  <script defer src="https://cloud.umami.is/script.js" data-website-id="e3212855-fce7-4e93-ad26-5ccec62a253b"></script>

</head>
<body>
  <div class="wrapper">
    <header>
      <h1 class="header-title"><a href="/">alessandro feitosa jr.</a> / <a href="/blog">blog</a></h1>
    </header>
    <main>
        <h1 class="post-title">Como ativar a API de tooltip do Vega-Lite no Observable Framework</h1>
        
          <p class="post-date">2024-11-15</p>
        
        <div class="blog-content">
          <p>Tenho usado o <a href="https://observablehq.com/framework/">Observable Framework</a> para criar dashboards na <a href="https://belo.re/">Belo</a>. Gostei da ferramenta pela autonomia: por ser baseada em código, em vez de interfaces de arrastar e soltar, como a maioria dos softwares de Business Intelligence, tenho muito mais controle.</p>
<p>A curva de aprendizagem não é muito íngreme, mas há alguns detalhes que não constam na documentação do projeto. O <a href="https://vega.github.io/vega-lite/docs/tooltip.html#plugin">plugin de tooltip</a> do <a href="https://vega.github.io/vega-lite/">Vega-Lite</a>, por exemplo, não vem ativo por padrão e não basta importar a biblioteca correspondente.</p>
<p><strong>É preciso instanciar o manipulador de tooltip e associá-lo à visualização para que ela funcione corretamente</strong>. Caso contrário, elas ficam dependentes das caixas de diálogo do navegador, que demoram muito para aparecer.</p>
<p>Essas são as importações:</p>
<pre><code class="language-js">import * as vega from &quot;npm:vega&quot;;
import * as vegaLite from &quot;npm:vega-lite&quot;;
import * as vegaLiteApi from &quot;npm:vega-lite-api&quot;;
import * as vegaTooltip from &quot;npm:vega-tooltip&quot;;
</code></pre>
<p>E aqui a chamada para que a tooltip passe a funcionar:</p>
<pre><code class="language-js">const vl = vegaLiteApi.register(vega, vegaLite, {
  init: (view) =&gt; {
    view.tooltip(new vegaTooltip.Handler().call);
    if (view.container()) view.container().style[&quot;overflow-x&quot;] = &quot;auto&quot;;
  }
});
</code></pre>
<p><a href="https://observablehq.observablehq.cloud/pangea/party/vega-lite-tooltips">Este link</a> contém um exemplo ao vivo, que foi o que me ajudou a resolver o problema.</p>

        </div>
        
        <div class="post-footer">
          <div class="human-content">{ texto 100% escrito por um humano }</div>
          <a href="mailto:alessandrofajr@protonmail.com?subject=Como ativar a API de tooltip do Vega-Lite no Observable Framework"><button class="button-email">@ responda por email @</button></a>
        </div>  

        <div class="breaker"></div>
        <div class="cta-newsletter">
          Receba, no máximo uma vez por semana, os últimos posts e uma lista de <a href="/links" class="newsletter-link">links interessantes</a>:
          <form
            action="https://buttondown.com/api/emails/embed-subscribe/alessandrofajr"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.com/alessandrofajr', 'popupwindow')"
          >
            <input class="field-email" type="email" name="email" placeholder="Insira o seu email"/>
            <input class="button-email" type="submit" value="assinar" />
          </form>
        </div> 
    </main>
    <footer class="site-footer">
  <nav class="footer-links">
    <ul>
      <li><a href="/">home</a></li>
      <li><a href="/blog/">blog</a></li>
      <li><a href="/links/">links</a></li>
      <li><a href="/quotes/">citações</a></li>
      <li><a href="/about/">sobre</a></li>
      <li><a href="/feeds">rss</a></li>
    </ul>
  </nav>
</footer>

  </div>
</body>
</html>